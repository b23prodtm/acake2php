"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAuthDependentMemoize = void 0;
const memoizee = require("memoizee");
const DEFAULT_CACHING_INTERVAL = 10 * 60 * 1000; // 10 minutes
const getAuthDependentMemoize = (pubsub, cacheInterval = DEFAULT_CACHING_INTERVAL) => {
    return (fn) => {
        const memoizedFn = memoizee(fn, {
            maxAge: cacheInterval,
            primitive: true,
            promise: true,
        });
        pubsub.subscribe('auth.keyChange', () => memoizedFn.clear());
        return memoizedFn;
    };
};
exports.getAuthDependentMemoize = getAuthDependentMemoize;
